
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://gem-cp.github.io/mkdocs-api-poc/spec-vsdm2/docs/vsdm_anwendungsfaelle/">
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>VSD vom Fachdienst abrufen - API PoC and Integrated Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vsd-vom-fachdienst-abrufen" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="API PoC and Integrated Docs" class="md-header__button md-logo" aria-label="API PoC and Integrated Docs" data-md-component="logo">
      
  <img src="../../../assets/gematik-logo-small.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            API PoC and Integrated Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              VSD vom Fachdienst abrufen
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/gem-cp/mkdocs-api-poc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    gem-cp/mkdocs-api-poc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../spec-VSDM2/README.md" class="md-tabs__link">
          
  
  
  VSDM2

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../zeta/" class="md-tabs__link">
          
  
  
  ZETA

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="API PoC and Integrated Docs" class="md-nav__button md-logo" aria-label="API PoC and Integrated Docs" data-md-component="logo">
      
  <img src="../../../assets/gematik-logo-small.svg" alt="logo">

    </a>
    API PoC and Integrated Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/gem-cp/mkdocs-api-poc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    gem-cp/mkdocs-api-poc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    VSDM2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            VSDM2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spec-VSDM2/README.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VSDM2 Dokumentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spec-VSDM2/docs/vsdm_anwendungsfaelle.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Anwendungsfälle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spec-VSDM2/docs/vsdm_anwendungsszenarien.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Anwendungsszenarien
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spec-VSDM2/docs/vsdm_psinteraktionen.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Primärsystem Interaktionen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spec-VSDM2/docs/vsdm_ablauf_ps.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Abläufe
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spec-VSDM2/docs/vsdm_fhir_infos.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VSDM FHIR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spec-VSDM2/docs/vsdm_informationsmodell.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VSDM Informationsmodell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spec-VSDM2/docs/vsdm_kontext_popp_zt.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VSDM Kontext PoPP und ZETA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spec-VSDM2/docs/vsdm_pruefziffer.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VSDM Prüfziffer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spec-VSDM2/docs/vsdm_statuscodes.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Status Codes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spec-VSDM2/docs/vsdm_errorcodes.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Error Codes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ZETA
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            ZETA
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../zeta/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZETA Dokumentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../zeta/docs/api/v1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZETA API v1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../zeta/docs/zeta-guard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZETA Guard
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#varianten-des-abrufs-der-vsd" class="md-nav__link">
    <span class="md-ellipsis">
      Varianten des Abrufs der VSD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Varianten des Abrufs der VSD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variante-1" class="md-nav__link">
    <span class="md-ellipsis">
      Variante 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variante-2-und-3" class="md-nav__link">
    <span class="md-ellipsis">
      Variante 2 und 3
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variante-4-und-5" class="md-nav__link">
    <span class="md-ellipsis">
      Variante 4 und 5
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="vsd-vom-fachdienst-abrufen">VSD vom Fachdienst abrufen</h1>
<p>Der Anwendungsfall ermöglicht dem Leistungserbringer,
- das gültige Versicherungsverhältnis beim erstmaligen Quartalsbesuch zu prüfen,
- die jeweils zum Besuch aktuellen VSD und
- die Prüfziffer für die Abrechnung zu erhalten</p>
<p>Vorraussetzungen für die Durchführung des VSDM-Anwendungsfalls ist die Herstellung des Versorgungskontextes. Versorgungskontext bedeutet, dass ein Zusammenhang zwischen einem berechtigten Versicherten und einer behandelnden oder versorgenden Leistungserbringerinstitution (LEI) hergestellt wird.</p>
<p>Der Versorgungskontext wird durch die folgenden Schritte realisiert:
- Authentisierung der LEI am PoPP-Service mittels einer SM-B Identität (Karte oder HSM)
- Authentisierung des Versicherten mittels eGK oder GesundheitsID</p>
<p>Nach der erfolgreichen Authentisierung der LEI und des Versicherten wird das Vorhandensein des Versorgungskontextes in Form eines PoPP-Tokens, welcher an das PS übergeben wird, attestiert. Anschließend kann das Primärsystems den PoPP-Token als Autorisierung verwenden, um den Abruf der Versichertenstammdaten am Fachdienst VSDM 2.0 durchzuführen. Die Herstellung des Versorgungskontextes ist nur beim ersten Besuch des Versicherten im laufenden Quartal notwendig. Bei Folgebesuchen kann der im PS bereits vorhandene PoPP-Token für jeden weiteren Abruf der VSD im laufenden Quartal verwendet werden.</p>
<p>Die Authentisierung der LEI gegenüber dem PoPP-Dienst und gegenüber dem Fachdienst ist einmal am Tag erforderlich.
Zukünftig kann der Versicherte auch die GesundheitsID in Verbindung mit einem Frontend des Versicherten (FdV) nutzen, um sich gegenüber dem PoPP-Dienst zu authentisieren.</p>
<p>Die Anwendungsfälle zur Authentisierung des Versicherten und der LEI sind im Dokument [gemSpec_PoPP_Service] beschrieben.</p>
<p><strong>Übersicht der Varianten beim Abruf VSD</strong></p>
<p>Die nachfolgend aufgeführte Tabelle stellt die möglichen Varianten des Anwendungsfalls Abruf VSD dar.</p>
<p>Tabelle Übersicht Varianten Abruf VSD
| Variante | Art des Besuchs | Versicherter | VSD | Bemerkung |
| :-- | :---------- | :---------- | :---------- | ------------ |
| 1 | 1. x im Quartal | unbekannter Versicherter | mit Aktualisierung | Übertragung VSD und Anlage Patientenstammblatt |
| 2 | 1. x im Quartal | bekannter Versicherter | ohne Aktualisierung | keine Übertragung VSD |
| 3 | 1. x im Quartal | bekannter Versicherter | mit Aktualisierung | Übertragung VSD und Aktualisierung Patientenstammblatt |
| 4 | Folgebesuch | bekannter Versicherter | ohne Aktualisierung | keine Übertragung VSD |
| 5 | Folgebesuch | bekannter Versicherter | mit Aktualisierung | Übertragung VSD und Aktualisierung Patientenstammblat |</p>
<h2 id="varianten-des-abrufs-der-vsd">Varianten des Abrufs der VSD</h2>
<h3 id="variante-1">Variante 1</h3>
<p>Ein unbekannter Versicherter wird in der LEI als Patient aufgenommen</p>
<p><strong>Eingangsbedingung:</strong>
- Abruf der VSD erfolgt erstmalig für einen unbekannten Versicherten
- Versicherter authentisiert sich mit eGK oder GesundheitsID
- LEI ist am PoPP-Service registriert und angemeldet
- Dienstlokalisierung des FD VSDM 2.0 ist erfolgt</p>
<p><strong>Vorraussetzungen:</strong>
- Versorgungskontext ist in Form einen vorliegenden PoPP-Tokens attestiert
- PoPP-Token liegt im PS vor
- KVNR und IK-Nummer sind im PS gespeichert (z.B. im Patientenstammblatt)</p>
<table>
<thead>
<tr>
<th>Nr</th>
<th style="text-align: left;">Aktivität</th>
<th style="text-align: left;">Komponente</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td style="text-align: left;">VSD am FD anfragen</td>
<td style="text-align: left;">PS</td>
<td style="text-align: left;">Zur Anfrage an den zuständigen Fachdienst wird der gültige Versorgungskontextnachweis in Form eines PoPP-Tokens, der Access-Token und der VSD-Änderungsindikator (ETag) übertragen. ETag muss auf "0" gesetzt werden</td>
</tr>
<tr>
<td>2</td>
<td style="text-align: left;">Access-Token prüfen</td>
<td style="text-align: left;">ZT-Cluster</td>
<td style="text-align: left;">Der HTTP-Proxy des ZT-Clusters prüft auf gültigen Access-Token und leitet den Request an den FD weiter.</td>
</tr>
<tr>
<td>3</td>
<td style="text-align: left;">PoPP-Token prüfen</td>
<td style="text-align: left;">ZT-Cluster</td>
<td style="text-align: left;">Der HTTP-Proxy des ZT-Clusters prüft auf gültigen PoPP-Token und leitet den Request an den FD weiter.</td>
</tr>
<tr>
<td>4</td>
<td style="text-align: left;">KVNR übermitteln</td>
<td style="text-align: left;">ZT-Cluster</td>
<td style="text-align: left;">Der HTTP-Proxy des ZT-Clusters übermittelt dem FD VSDM die KVNR in Form des Elements patientId des HTTP-Headers ZETA-PoPP-Token-Content zur Lokalisierung der VSD-Version und der Versichertenstammdaten.</td>
</tr>
<tr>
<td>5</td>
<td style="text-align: left;">VSD-Version prüfen</td>
<td style="text-align: left;">FD</td>
<td style="text-align: left;">Der FD führt beim Aufruf der HTTP-GET-Operation vor der Verarbeitung eines Versichertenstammdatensatzes eine VSD-Aktualitätsprüfung durch</td>
</tr>
<tr>
<td>6</td>
<td style="text-align: left;">VSD lokalisieren</td>
<td style="text-align: left;">FD</td>
<td style="text-align: left;">Der FD führt bei Unterschieden in der VSD Version zwischen PS und FD eine Lokalisierung der VSD anhand der KVNR durch und ruft diese ab</td>
</tr>
<tr>
<td>7</td>
<td style="text-align: left;">PZ und VSD übermitteln</td>
<td style="text-align: left;">FD</td>
<td style="text-align: left;">Der FD übermittelt die Prüfziffer, den etag_value und die VSD an den HTTP-Proxy des ZT-Clusters</td>
</tr>
<tr>
<td>8</td>
<td style="text-align: left;">PZ und VSD an PS übermitteln</td>
<td style="text-align: left;">ZT-Cluster</td>
<td style="text-align: left;">Der HTTP-Proxy des ZT-Clusters übermittelt die Prüfziffer, den etag_value und die VSD an das PS</td>
</tr>
<tr>
<td>9</td>
<td style="text-align: left;">PZ und VSD speichern</td>
<td style="text-align: left;">PS</td>
<td style="text-align: left;">Die übermittelte PZ, der etag_value und die VSD werden gespeichert</td>
</tr>
</tbody>
</table>
<p><strong>Nachbedingung</strong>
- PS: Die VSD wurden im Patientenstammblatt gespeichert
- PS: Die Prüfziffer ist im PS gespeichert
- PS: der etag_value wurde aktualisiert</p>
<h3 id="variante-2-und-3">Variante 2 und 3</h3>
<p>Ein der LEI bereits bekannter Versicherter wird zum ersten Mal im laufenden Quartal als Patient behandelt. In Variante 2 erfolgt keine Aktualisierung der VSD.</p>
<p><strong>Eingangsbedingung:</strong>
- Abruf der VSD erfolgt erstmalig im Quartal für einen bekannten Versicherten
- Versicherter authentisiert sich mit eGK oder GesundheitsID
- LEI ist am PoPP-Service registriert und angemeldet
- Dienstlokalisierung des FD VSDM 2.0 ist erfolgt</p>
<p><strong>Vorraussetzungen:</strong>
- Versorgungskontext ist in Form einen vorliegenden PoPP-Tokens attestiert
- PoPP-Token liegt im PS vor
- KVNR und IK-Nummer sind im PS gespeichert (z.B. im Patientenstammblatt)</p>
<table>
<thead>
<tr>
<th>Nr</th>
<th style="text-align: left;">Aktivität</th>
<th style="text-align: left;">Komponente</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td style="text-align: left;">VSD am FD anfragen</td>
<td style="text-align: left;">PS</td>
<td style="text-align: left;">Zur Anfrage an den zuständigen Fachdienst wird der gültige Versorgungskontextnachweis in Form eines PoPP-Tokens, der Access-Token und der VSD-Änderungsindikator (ETag) übertragen.</td>
</tr>
<tr>
<td>2</td>
<td style="text-align: left;">Access-Token prüfen</td>
<td style="text-align: left;">ZT-Cluster</td>
<td style="text-align: left;">Der HTTP-Proxy des ZT-Clusters prüft auf gültigen Access-Token und leitet den Request an den FD weiter.</td>
</tr>
<tr>
<td>3</td>
<td style="text-align: left;">PoPP-Token prüfen</td>
<td style="text-align: left;">ZT-Cluster</td>
<td style="text-align: left;">Der HTTP-Proxy des ZT-Clusters prüft auf gültigen PoPP-Token und leitet den Request an den FD weiter.</td>
</tr>
<tr>
<td>4</td>
<td style="text-align: left;">KVNR übermitteln</td>
<td style="text-align: left;">ZT-Cluster</td>
<td style="text-align: left;">Der HTTP-Proxy des ZT-Clusters übermittelt dem FD VSDM die KVNR in Form des Elements patientId des HTTP-Headers ZETA-PoPP-Token-Content zur Lokalisierung der VSD-Version und der Versichertenstammdaten.</td>
</tr>
<tr>
<td>5</td>
<td style="text-align: left;">VSD-Version prüfen</td>
<td style="text-align: left;">FD</td>
<td style="text-align: left;">Der FD führt beim Aufruf der HTTP-GET-Operation vor der Verarbeitung eines Versichertenstammdatensatzes eine VSD-Aktualitätsprüfung auf Basis der KVNR durch</td>
</tr>
<tr>
<td>6.1</td>
<td style="text-align: left;">PZ übermitteln</td>
<td style="text-align: left;">FD</td>
<td style="text-align: left;">Der FD übermittelt bei Übereinstimmung des etag_values mit dem Änderungsindikator die Prüfziffer und den etag_value an den HTTP-Proxy des ZT-Clusters</td>
</tr>
<tr>
<td>6.2</td>
<td style="text-align: left;">VSD lokalisieren</td>
<td style="text-align: left;">FD</td>
<td style="text-align: left;">Der FD übermittelt bei Unterschieden zwischen etag_value und dem Änderungsindikator die auf Basis der KVNR lokalisierten VSD, die Prüfziffer und den etag_value an den HTTP-Proxy des ZT-Clusters</td>
</tr>
<tr>
<td>7</td>
<td style="text-align: left;">PZ und ggf. VSD an PS übermitteln</td>
<td style="text-align: left;">ZT-Cluster</td>
<td style="text-align: left;">Der HTTP-Proxy des ZT-Clusters übermittelt die Prüfziffer, den etag_value und bei Unterschieden in der VSD Version die VSD an das PS</td>
</tr>
<tr>
<td>8</td>
<td style="text-align: left;">PZ und ggf. VSD speichern</td>
<td style="text-align: left;">PS</td>
<td style="text-align: left;">Die übermittelte PZ, der etag_value und bei Unterschieden in der VSD Version die VSD werden gespeichert</td>
</tr>
</tbody>
</table>
<p>Schritt 6.1: Variante 2 ohne Aktualisierung VSD
Schritt 6.2: Variante 3 mit Aktualisierung VSD</p>
<p><strong>Nachbedingung</strong>
- PS: Variante 3 - Die VSD sind im Patientenstammblatt aktualisiert
- PS: Die Prüfziffer ist im PS gespeichert
- PS: der etag_value wurde aktualisiert</p>
<h3 id="variante-4-und-5">Variante 4 und 5</h3>
<p>Ein der LEI bereits bekannter Patient wird im Rahmen eines Folgebesuchs behandelt und ist bereits im laufenden Quartal aufgenommen/ behandelt worden. In Variante 4 erfolgt keine Aktualisierung der VSD.</p>
<p><strong>Eingangsbedingung:</strong>
- Abruf der VSD erfolgt erneut im laufenden Quartal für einen bekannten Versicherten
- Dienstlokalisierung des FD VSDM 2.0 ist erfolgt</p>
<p><strong>Vorraussetzungen:</strong>
- PoPP-Token liegt im PS vor (aus erstem VSD-Abruf des laufenden Quartals)
- KVNR und IK-Nummer sind im PS gespeichert (z.B. im Patientenstammblatt)</p>
<table>
<thead>
<tr>
<th>Nr</th>
<th style="text-align: left;">Aktivität</th>
<th style="text-align: left;">Komponente</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td style="text-align: left;">VSD am FD anfragen</td>
<td style="text-align: left;">PS</td>
<td style="text-align: left;">Zur Anfrage an den zuständigen Fachdienst wird der gültige Versorgungskontextnachweis in Form eines PoPP-Tokens, der Access-Token und der VSD-Änderungsindikator (ETag) übertragen.</td>
</tr>
<tr>
<td>2</td>
<td style="text-align: left;">Access-Token prüfen</td>
<td style="text-align: left;">ZT-Cluster</td>
<td style="text-align: left;">Der HTTP-Proxy des ZT-Clusters prüft auf gültigen Access-Token und leitet den Request an den FD weiter.</td>
</tr>
<tr>
<td>3</td>
<td style="text-align: left;">PoPP-Token prüfen</td>
<td style="text-align: left;">ZT-Cluster</td>
<td style="text-align: left;">Der HTTP-Proxy des ZT-Clusters prüft auf gültigen PoPP-Token und leitet den Request an den FD weiter.</td>
</tr>
<tr>
<td>4</td>
<td style="text-align: left;">KVNR übermitteln</td>
<td style="text-align: left;">ZT-Cluster</td>
<td style="text-align: left;">Der HTTP-Proxy des ZT-Clusters übermittelt dem FD VSDM die KVNR in Form des Elements patientId des HTTP-Headers ZETA-PoPP-Token-Content zur Lokalisierung der VSD-Version und der Versichertenstammdaten.</td>
</tr>
<tr>
<td>5</td>
<td style="text-align: left;">VSD-Version prüfen</td>
<td style="text-align: left;">FD</td>
<td style="text-align: left;">Der FD führt beim Aufruf der HTTP-GET-Operation vor der Verarbeitung eines Versichertenstammdatensatzes eine VSD-Aktualitätsprüfung auf Basis der KVNR durch</td>
</tr>
<tr>
<td>6.1</td>
<td style="text-align: left;">PZ übermitteln</td>
<td style="text-align: left;">FD</td>
<td style="text-align: left;">Der FD übermittelt bei Übereinstimmung des etag_values mit dem Änderungsindikator die Prüfziffer und den etag_value an den HTTP-Proxy des ZT-Clusters</td>
</tr>
<tr>
<td>6.2</td>
<td style="text-align: left;">VSD lokalisieren</td>
<td style="text-align: left;">FD</td>
<td style="text-align: left;">Der FD übermittelt bei Unterschieden zwischen etag_value und dem Änderungsindikator die auf Basis der KVNR lokalisierten VSD, die Prüfziffer und den etag_value an den HTTP-Proxy des ZT-Clusters</td>
</tr>
<tr>
<td>7</td>
<td style="text-align: left;">PZ und ggf. VSD an PS übermitteln</td>
<td style="text-align: left;">ZT-Cluster</td>
<td style="text-align: left;">Der HTTP-Proxy des ZT-Clusters übermittelt die Prüfziffer, den etag_value und bei Unterschieden in der VSD Version die VSD an das PS</td>
</tr>
<tr>
<td>8</td>
<td style="text-align: left;">PZ und ggf. VSD speichern</td>
<td style="text-align: left;">PS</td>
<td style="text-align: left;">Die übermittelte PZ, der etag_value und bei Unterschieden in der VSD Version die VSD werden gespeichert</td>
</tr>
</tbody>
</table>
<p>Schritt 6.1: Variante 4 ohne Aktualisierung VSD
Schritt 6.2: Variante 5 mit Aktualisierung VSD</p>
<p><strong>Nachbedingung</strong>
- PS: Variante 5 - Die VSD sind im Patientenstammblatt aktualisiert
- PS: Die Prüfziffer ist im PS gespeichert
- PS: der etag_value wurde aktualisiert</p>
<p><strong>Anmerkung</strong>
Der Patient muss weder seine eGK oder GesundheitsID verwenden noch muss ein neuer PoPP-Token vom PoPP-Service bezogen werden, da der im PS bereits vorliegende PoPP-Token für alle Folgebesuche im laufenden Quartal verwendet werden kann.</p>
<p><strong>Hinweise zum Entity Tag (ETag)</strong></p>
<p>Der ETag oder auch VSD-Änderungsindikator dienst dazu, die Version der VSD eindeutig zu identifizieren. Der ETag selbst ist eine Zeichenkette.
Erhält das PS Versichertenstammdaten vom Fachdienst VSDM 2.0 wird durch diesen auch ein ETag übertragen. Dieser wird im PS gespeichert und darf nicht verändert werden. Wird ein erneuter Abruf der VSD gestartet, überträgt das PS diesen ETag. Der Fachdienst vergleicht den Wert des ETags mit dem VSD-Änderungsindikator des Fachdienstes. Stimmen die Werte des ETags aus dem Request und des VSD-Änderungsindikators nicht überein, werden als Ergebnis die VSD an das PS gesendet.
Liegt dem PS bei einer Anfrage an den Fd noch kein VSD-Änderungsindikator vor, muss der ETag Wert durch das PS auf Null gesetzt werden.</p>
<h1 id="vsd-von-egk-lesen">VSD von eGK lesen</h1>
<p>Dieser Anwendungsfall kommt dann zum tragen, wenn die VSD nicht online vom Fachdienst der Kasse abgerufen werden können. Die LEI muss dann in der Lage sein, die vorhandenen Daten von der eGk zu lesen, anzuzeigen und speichen zu können. Die erhaltenen Daten dienen dann zur Nutzung von bereits etablierten Ersatzverfahren ausserhalb des VSDM 2.0.
Das PS muss in der Lage sein, die eGK mit den in der LEI vorhandenen Kartenlesegeräten auslesen zu können. Das können sowohl eHealth-Kartenterminals als auch handelsübliche USB Smartcard-Reader sein. 
Die Daten werden aus dem ungeschützten Bereich der eGK aus den Containern PD und VD gelesen.
Zu beachten ist, dass sich auf der eGk einerseits der komplette VSD-Datensatz und andererseits auch ein verkürzter Datensatz (siehe gemSpec_VSDM2, Kapitel "7.2 Informationsmodell verkürzte VSD auf eGK") befinden kann. Keiner dieser Datensätze kann jedoch den notwendigen Abruf der VSD im laufenden Quartal ersetzen, da es sich lediglich um statische Daten auf der eGK handelt.
Eine Aktualisierung der VSD auf der eGK findet nicht statt.</p>
<p><strong>Auslesen der VSD mittels eHealth-Kartenterminal</strong></p>
<p>Die in der LEI bereits vorhandenen eHealth_Kartenterminals (eHKT), welche mit dem Konnektor gepairt sind, können weiterhin zum Auslesen der VSD von der eGK verwendet werden. Die Schnittstelle <em>I_VSDService</em> stellt dafür die Operation <em>ReadVSD</em> zum Lesen der VSD zur Verfügung.
Im PS muss folgender Konfigurationsparameter verwendet werden:</p>
<table>
<thead>
<tr>
<th>Konfigurationsparameter zum Lesen der VSD</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>MODE-ONLINE-CHECK</em> / <em>NEVER</em> / Eine Online-Prüfung wird niemals vom PS angefordert</td>
</tr>
</tbody>
</table>
<p>Parametrisierung <em>ReadVSD</em></p>
<table>
<thead>
<tr>
<th>ReadVSD Paramter</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>ReadOnlineReceipt=false</em></td>
</tr>
<tr>
<td><em>PerformOnlineCheck=false</em></td>
</tr>
</tbody>
</table>
<p><strong>Auslesen der VSD mittels handelsüblichem USB Smartcard-Reader</strong></p>
<p>Für das Aulesen der VSD kann alternativ zum eHKT auch ein handelsüblicher Smartcard-Reader verwendet werden. Dieser ist an das PS angeschlossen und liefert die VSD aus den frei auslesbaren Containern der eGK zur Übernahme direkt in das PS. Die Beteiligung eines Konnektors und eHKT für das Auslesen der eGK findet in diesem Szeanrio nicht statt.
Das PS muss für dieses Szenarion entsprechend erweitert werden. 
Für die Implementierung kann das nachfolgend verlinkte Beispielprogramm zum Auslesen der eGK bei Nutzung eines USB Smartcard_Readers genutzt werden:</p>
<p><a href="/src/examples/eGKRead.java">Beispielprogramm zum Auslesen der eGK</a></p>
<p>Hinweis 1: Die Daten werden ausgelesen und decodiert in einer Log-Datei angezeigt (auch als XML).
Hinweis 2: Das Programm prüft NICHT die Echtheit der eGK.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>